(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"18k5":function(t,e,s){"use strict";function r(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.originalData=JSON.parse(JSON.stringify(e)),Object.assign(this,e),this.errors={},this.submitted=!1}var e,s,i;return e=t,(s=[{key:"data",value:function(){var t=this;return Object.keys(this.originalData).reduce(function(e,s){return e[s]=t[s],e},{})}},{key:"get",value:function(t){return axios.get(t).catch(this.onFail.bind(this)).then(this.onSuccess.bind(this))}},{key:"delete",value:function(t){this.submit(t,"delete")}},{key:"patch",value:function(t){this.submit(t,"patch")}},{key:"post",value:function(t){this.submit(t)}},{key:"submit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";return axios[e](t,this.data()).catch(this.onFail.bind(this)).then(this.onSuccess.bind(this))}},{key:"onSuccess",value:function(t){return this.submitted=!0,this.errors={},t}},{key:"onFail",value:function(t){throw console.log(t),this.errors=t.response.data.errors,this.submitted=!1,t}},{key:"reset",value:function(){Object.assign(this,this.originalData)}}])&&r(e.prototype,s),i&&r(e,i),t}();e.a=i},"KHd+":function(t,e,s){"use strict";function r(t,e,s,r,i,n,o,a){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=s,u._compiled=!0),r&&(u.functional=!0),n&&(u._scopeId="data-v-"+n),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:u}}s.d(e,"a",function(){return r})},KqqD:function(t,e,s){"use strict";s.r(e);var r=s("18k5"),i={props:{set:Object,"selected-products":Array,chefs:Array,products:Array},data:function(){return{form:new r.a({chef:this.set.chef.id,products:this.selectedProducts})}},methods:{addProduct:function(t){this.form.products.push(this.products.find(function(e){return e.id===t}))},removeProduct:function(t){this.form.products=this.form.products.filter(function(e){return e.id!==t})},submit:function(){if(0===this.form.products.length)return this.form.errors={},void(this.form.errors.products="Le Set doit contenir au moins un produit.");var t=this.set.id;this.form.submit("/dashboard/sets/".concat(t),"patch").then(function(t){return location=t.data.message}).catch(function(t){})}}},n=s("KHd+"),o=Object(n.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-6 max-w-xl bg-white rounded shadow p-8"},[s("form",{attrs:{method:"POST"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("label",{staticClass:"block"},[s("span",{staticClass:"font-semibold"},[t._v("Chef / Groupe")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.chef,expression:"form.chef"}],staticClass:"form-select block w-full mt-1 border-gray-400",attrs:{name:"chef"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"chef",e.target.multiple?s:s[0])}}},t._l(t.chefs,function(e){return s("option",{key:e.id,domProps:{value:e.id,selected:e.id===t.set.chef.id}},[t._v(t._s(e.first_name)+" "+t._s(e.last_name))])}),0)]),t._v(" "),s("div",{staticClass:"mt-6"},[s("h3",{staticClass:"font-semibold mb-3"},[t._v("Produits actuellement dans le Set")]),t._v(" "),t._l(t.form.products,function(e){return s("div",{key:"selected-"+e.id,staticClass:"inline-block",on:{click:function(s){return t.removeProduct(e.id)}}},[s("div",{staticClass:"group label-edit bg-green-500 hover:bg-red-500"},[s("span",[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"ml-2 opacity-0 group-hover:opacity-100"},[s("svg",{staticClass:"fill-current w-2",attrs:{viewBox:"0 0 20 20"}},[s("path",{attrs:{d:"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"}})])])])])})],2),t._v(" "),s("div",{staticClass:"mt-6"},[s("h3",{staticClass:"font-semibold mb-3"},[t._v("Autres Produits")]),t._v(" "),t._l(t.products,function(e){return s("div",{key:e.id,staticClass:"inline-block",on:{click:function(s){return t.addProduct(e.id)}}},[t.form.products.some(function(t){return t.id===e.id})?t._e():s("div",{staticClass:"group label-edit bg-red-500 hover:bg-green-500"},[s("span",[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"ml-2 opacity-0 group-hover:opacity-100"},[s("svg",{staticClass:"fill-current w-2",attrs:{viewBox:"0 0 20 20"}},[s("path",{attrs:{d:"M0 11l2-2 5 5L18 3l2 2L7 18z"}})])])])])})],2),t._v(" "),t.form.errors.products?s("span",{staticClass:"mt-2 text-xs text-red-600 italic"},[t._v(t._s(t.form.errors.products))]):t._e(),t._v(" "),s("button",{staticClass:"mt-8 ml-auto block btn-primary",attrs:{type:"submit"}},[t._v("Valider les modifications")])])])},[],!1,null,null,null);e.default=o.exports}}]);